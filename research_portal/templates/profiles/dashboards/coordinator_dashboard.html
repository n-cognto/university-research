{% extends "base.html" %}
{% load static %}

{% block title %}Local Coordinator Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Dashboard header -->
    <div class="dashboard-header">
        <h1>Welcome, {{ user.first_name }}!</h1>
        <p>{{ role_display }} Dashboard</p>
    </div>

    <!-- Main dashboard content -->
    <div class="dashboard-content">
        <div class="row">
            <!-- Left sidebar with navigation -->
            <div class="col-md-3 dashboard-sidebar">
                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <a class="nav-link active" id="v-pills-overview-tab" data-toggle="pill" href="#v-pills-overview" role="tab" aria-controls="v-pills-overview" aria-selected="true">Overview</a>
                    <a class="nav-link" id="v-pills-location-tab" data-toggle="pill" href="#v-pills-location" role="tab" aria-controls="v-pills-location" aria-selected="false">Location Management</a>
                    <a class="nav-link" id="v-pills-members-tab" data-toggle="pill" href="#v-pills-members" role="tab" aria-controls="v-pills-members" aria-selected="false">Team Members</a>
                    <a class="nav-link" id="v-pills-reports-tab" data-toggle="pill" href="#v-pills-reports" role="tab" aria-controls="v-pills-reports" aria-selected="false">Reports</a>
                </div>

                <div class="dashboard-nav-links mt-5">
                    <h5>Quick Links</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="{% url profile_url %}">My Profile</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url maps_url %}">Research Map</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url repository_url %}">Data Repository</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url logout_url %}">Logout</a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Right content area with tab content -->
            <div class="col-md-9">
                <div class="tab-content" id="v-pills-tabContent">
                    <!-- Overview Tab -->
                    <div class="tab-pane fade show active" id="v-pills-overview" role="tabpanel" aria-labelledby="v-pills-overview-tab">
                        <div class="card">
                            <div class="card-header">
                                <h3>Location Overview</h3>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="stat-card">
                                            <h4>Active Researchers</h4>
                                            <p class="stat-number">12</p>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="stat-card">
                                            <h4>Current Projects</h4>
                                            <p class="stat-number">5</p>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="stat-card">
                                            <h4>Data Submissions</h4>
                                            <p class="stat-number">27</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card mt-4">
                            <div class="card-header">
                                <h3>Recent Activity</h3>
                            </div>
                            <div class="card-body">
                                <ul class="activity-feed">
                                    <li class="feed-item">
                                        <div class="feed-date">Today</div>
                                        <div class="feed-content">New dataset submitted for review</div>
                                    </li>
                                    <li class="feed-item">
                                        <div class="feed-date">Yesterday</div>
                                        <div class="feed-content">Field research completed at Site B</div>
                                    </li>
                                    <li class="feed-item">
                                        <div class="feed-date">2 days ago</div>
                                        <div class="feed-content">New team member joined the project</div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Location Management Tab -->
                    <div class="tab-pane fade" id="v-pills-location" role="tabpanel" aria-labelledby="v-pills-location-tab">
                        <div class="card">
                            <div class="card-header">
                                <h3>Location Management</h3>
                            </div>
                            <div class="card-body">
                                <div class="location-map">
                                    <!-- Map placeholder -->
                                    <div class="map-placeholder">
                                        <p>Interactive map of research locations will be displayed here</p>
                                    </div>
                                </div>
                                
                                <div class="location-stats mt-4">
                                    <h4>Location Statistics</h4>
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Site Name</th>
                                                <th>Status</th>
                                                <th>Active Projects</th>
                                                <th>Last Updated</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Research Site A</td>
                                                <td><span class="badge badge-success">Active</span></td>
                                                <td>3</td>
                                                <td>2 days ago</td>
                                            </tr>
                                            <tr>
                                                <td>Research Site B</td>
                                                <td><span class="badge badge-success">Active</span></td>
                                                <td>1</td>
                                                <td>Yesterday</td>
                                            </tr>
                                            <tr>
                                                <td>Research Site C</td>
                                                <td><span class="badge badge-warning">Pending</span></td>
                                                <td>1</td>
                                                <td>1 week ago</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Team Members Tab -->
                    <div class="tab-pane fade" id="v-pills-members" role="tabpanel" aria-labelledby="v-pills-members-tab">
                        <div class="card">
                            <div class="card-header">
                                <h3>Team Members</h3>
                            </div>
                            <div class="card-body">
                                <div class="team-list">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="team-member-card">
                                                <div class="member-avatar">
                                                    <img src="{% static 'profiles/img/avatar-placeholder.png' %}" alt="Team Member">
                                                </div>
                                                <div class="member-info">
                                                    <h4>John Smith</h4>
                                                    <p>Research Assistant</p>
                                                    <a href="#" class="btn btn-sm btn-primary">View Profile</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="team-member-card">
                                                <div class="member-avatar">
                                                    <img src="{% static 'profiles/img/avatar-placeholder.png' %}" alt="Team Member">
                                                </div>
                                                <div class="member-info">
                                                    <h4>Jane Doe</h4>
                                                    <p>PhD Student</p>
                                                    <a href="#" class="btn btn-sm btn-primary">View Profile</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="invite-member mt-4">
                                    <button class="btn btn-success">Invite New Team Member</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Reports Tab -->
                    <div class="tab-pane fade" id="v-pills-reports" role="tabpanel" aria-labelledby="v-pills-reports-tab">
                        <div class="card">
                            <div class="card-header">
                                <h3>Reports & Analytics</h3>
                            </div>
                            <div class="card-body">
                                <div class="report-filters mb-4">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <label for="report-type">Report Type</label>
                                            <select class="form-control" id="report-type">
                                                <option>Activity Report</option>
                                                <option>Progress Report</option>
                                                <option>Resource Allocation</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="date-range">Date Range</label>
                                            <select class="form-control" id="date-range">
                                                <option>Last 7 days</option>
                                                <option>Last 30 days</option>
                                                <option>Last 90 days</option>
                                                <option>Custom range</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4">
                                            <label>&nbsp;</label>
                                            <button class="btn btn-primary form-control">Generate Report</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="report-charts">
                                    <h4>Data Collection Progress</h4>
                                    <div class="chart-placeholder">
                                        <p>Progress charts will be displayed here</p>
                                    </div>
                                </div>
                                
                                <div class="report-actions mt-4 text-right">
                                    <button class="btn btn-outline-primary">Export to PDF</button>
                                    <button class="btn btn-outline-primary">Export to Excel</button>
                                    <button class="btn btn-outline-primary">Email Report</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Dashboard-specific JavaScript can be added here
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize components or add event listeners
        // Replaced jQuery $(document).ready with standard DOM event listener
    });
</script>
{% endblock %}
